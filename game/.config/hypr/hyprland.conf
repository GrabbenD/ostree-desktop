# https://wiki.hyprland.org/
autogenerated = 0

# https://wiki.hyprland.org/Configuring/Monitors/
# $ hyprctl monitors

# Auto
#monitor = , highres, auto, 1

# AW3821DW [8 bit]
monitor = DP-3, 3840x1600@119.982002, 0x0, 1, bitdepth, 8
#monitor = DP-3, 3840x1600@59.993999, 0x0, 1, bitdepth, 8

# AW3821DW [10 bit] (broken/NVIDIA)
#monitor = DP-3, 3840x1600@119.982002, 0x0, 1, bitdepth, 10
#monitor = DP-3, 3840x1600@59.993999, 0x0, 1, bitdepth, 10

# Bind workspace to monitor
#wsbind = 1, DP-3
#wsbind = 2, DP-2

# See https://wiki.hyprland.org/Configuring/Keywords/ for more

# Source a file (multi-file configs)
# source = ~/.config/hypr/myColors.conf

# Mouse
#env = XCURSOR_SIZE,24
exec-once=hyprctl setcursor Bibata-Modern-Classic 32

# Update shared environment variables (todo)
# https://github.com/alebastr/sway-systemd/blob/main/src/session.sh
exec-once = dbus-update-activation-environment --systemd DESKTOP_SESSION XDG_CURRENT_DESKTOP XDG_SESSION_DESKTOP XDG_SESSION_TYPE DISPLAY I3SOCK SWAYSOCK WAYLAND_DISPLAY HYPRLAND_INSTANCE_SIGNATURE XCURSOR_SIZE XCURSOR_THEME
#exec-once = systemctl --user start hyprland-session.target
#exec-once = dbus-update-activation-environment --systemd --all

# Clipboard
#exec-once = wl-clipboard-history -t
exec-once = copyq --start-server

# If no init
#exec-once=pipewire
#exec-once=wireplumber
#exec-once=pipewire-pulse

# Todo
general:no_cursor_warps=1
general:no_focus_fallback=1

# Tearing
#general:allow_tearing = true
#env = WLR_DRM_NO_ATOMIC,1
#windowrulev2 = immediate, class:^(steam_app_1240440)$

misc {
    # Astetics
    disable_hyprland_logo = 1
    disable_splash_rendering = 1

    # Performance
    vrr = 1 # Freesync/GSYNC (Adaptive Sync)
    vfr = 1 # Variable frame rate
    no_direct_scanout = 1 # Fixes visual glitches and adds support for Halo Infinite

    # Sleep (broken)
    #mouse_move_enables_dpms = 1
    #key_press_enables_dpms = 1

    focus_on_activate = 0 # Don't steal focus

    # Fix stuttering
    animate_manual_resizes = 0
    animate_mouse_windowdragging = 0

    # Hide terminal
    enable_swallow = true

    # Todo
    #render_ahead_of_time = 1
    #render_ahead_safezone = 1 # 1-2
}

# https://wiki.hyprland.org/Configuring/Keywords/#executing
# $ hyprctl devices
# $ localectl
input {
    # Keyboard
    kb_layout = se
    kb_model = pc105
    repeat_rate = 50
    repeat_delay = 250

    # Mouse
    sensitivity = 0
    accel_profile = flat
    follow_mouse = 2 # Fixes mouse cursor type
    mouse_refocus = 0
}

# https://wiki.hyprland.org/Configuring/Variables
general {
    gaps_in = 1
    gaps_out = 0
    border_size = 3

    # https://www.geogebra.org/m/nv9vex3X
    # https://www.w3schools.com/colors/colors_picker.asp
    #
    # [Spectrum] equal corner distribution (π/4)
    # 45 (top left)
    # 135 (top right)
    # 225 (bottom right)
    # 315 (bottom left)
    #
    # [Dual/Triple] equal corner distribution (π/6)
    # 30 (top left)
    # 150 (top right)
    # 210 (bottom right)
    # 330 (bottom left)
    #
    # [Dual/Triple/Spectrum] cover 2 sides (π/2)
    # 360 && 0 (left)
    # 180 (right)
    # 270 (bottom)
    # 90 (top)
    #
    # [Any] uneven corner share (π/3)
    # 60 (top left)
    # 120 (top right)
    # 240 (bottom right)
    # 300 (bottom left)

    # Color spectrum
    # (255,0,0) (255,0,255) (0,0,255) (0,255,255) (0,255,0) (255,255,0)
    #col.active_border = rgb(FF0000) rgb(FF00FF) rgb(0000FF) rgb(00FFFF) rgb(00FF00) rgb(FFFF00) 135deg

    # Battle (darkred/lightyellow)
    #col.active_border = rgb(FF0000) rgb(FFFF00) 30deg

    # Harmonic Blue/Green
    #col.active_border = rgb(0000FF) rgb(00FF00) 45deg

    # Synergy (Darkred/Darkblue/Darkred)
    #col.active_border = rgb(FF0000) rgb(0000FF) rgb(FF0000) 30deg

    # Lava
    #col.active_border = rgb(ff0000) rgb(ffff00) rgb(ff0000) 180deg

    # Nordic (Darkblue/Lightblue/Darkblue)
    #col.active_border = rgb(0040ff) rgb(00bfff) rgb(0040ff) 180deg

    # Nordic harmony (Darkblue/Violet/Darkblue)
    #col.active_border = rgb(0066cc) rgb(6600cc) rgb(0066cc) 180deg

    # Magic
    #col.active_border = rgb(0066ff) rgb(9900cc) rgb(0066ff) rgb(9900cc) rgb(0066ff) 30deg

    # Northen Lights
    #col.active_border = rgb(339933) rgb(ff6699) rgb(0066cc) rgb(0066cc) rgb(ff6699) rgb(339933) 30deg

    # Nature *favo*
    col.active_border = rgb(339933) rgb(0066cc) rgb(0066cc) rgb(339933) 30deg

    # Artic (Lightblu/Darkblue)
    #col.active_border = rgb(00bfff) rgb(0040ff) rgb(0040ff) rgb(00bfff) 45deg

    # Happy (Orange/Violet/Darkblue)
    #col.active_border = rgb(ff9900) rgb(cc66ff) rgb(0000ff) 45deg

    # Asus (Darkorange / Lightorange / Darkviolet / Darkblue)
    #col.active_border = rgb(ff9933) rgb(ffcc33) rgb(9933ff) rgb(3366ff) rgb(3366ff) rgb(9933ff) rgb(ffcc33) rgb(ff9933) 30deg

    # Energy (Lightred/Darkblue/Lightred) ***
    #col.active_border = rgb(FF0000) rgb(0000FF) rgb(FF0000) 330deg

    col.inactive_border = rgba(595959aa)

    layout = dwindle
    resize_on_border = true
}

# https://wiki.hyprland.org/Configuring/Variables
decoration {
    rounding = 3

    blur {
        enabled = 0
        size = 3
        passes = 1
        new_optimizations = 1
    }

    drop_shadow = 1
    shadow_range = 3
    shadow_render_power = 0
    col.shadow = rgba(1a1a1aee)
}

# https://wiki.hyprland.org/Configuring/Animations
animations {
    # https://www.cssportal.com/css-cubic-bezier-generator / https://cubic-bezier.com
    enabled = 1

    # Effects
    # bezier = smooth, 0.5, 0, 0.5, 1
    #bezier = linear, 0, 0, 1, 1
    #bezier = overshoot, 0.5, 0, 0.5, 1.5

    # Windows (todo: windowsOut)
    #animation = windows, 1, 5, overshoot, slide

    # Borders
    # animation = borderangle, 0, 1, linear, once  # Static
    #animation = borderangle, 1, 100, linear, loop # Spectrum speed
    #animation = border, 1, 2, linear              # Highlight speed

    # All
    animation = fade, 0, 1, default # Disable
    #animation = fade, 1, 3, default  # Fade in

    # Workspace
    # animation = workspaces, 1, 2, smooth, slidevert # Slide
    #animation = workspaces, 0, 1, linear             # Disable

    # Default
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = workspaces, 1, 6, default
}

# https://wiki.hyprland.org/Configuring/Dwindle-Layout
dwindle {
    pseudotile = 1                # Easier to arrange windows vertically
    force_split = 0               # Allow mouse to split & use active windo for new split
    preserve_split = 0            # Uneven split
    #split_width_multiplier = 1.2 # Window split sensitivty
    split_width_multiplier = 1.6
    default_split_ratio = 1       # 50/50 split
}

# Debugging
#debug:overlay = 1
#debug:damage_blink = 1
#debug:damage_tracking = 0
#misc:vfr = 0

# Optimizations
debug:disable_logs = 1           # Reduce I/O
debug:enable_stdout_logs = 0

# https://wiki.hyprland.org/Configuring/Window-Rules
# hyprctl clients

# Spotify fix (spotifywm)
windowrulev2 = tile, class:^(Spotify)$
windowrulev2 = workspace 3, class:^(Spotify)$

# Steam
windowrulev2 = noborder, class:^(steam)$, title:^(Sign in to Steam)$
windowrulev2 = noshadow, class:^(steam)$, title:^(Sign in to Steam)$
windowrulev2 = noborder, class:^(steam)$, title:^(Shutdown)$
windowrulev2 = noshadow, class:^(steam)$, title:^(Shutdown)$
#windowrule = idleinhibit focus,^(steam_app)(.*)$
#windowrulev2 = float, class:^(steam)$, title:^(Friends List)(.*)$
#windowrulev2 = size 391 1225, class:^(steam)$, title:^(Friends List)$

# Audio
windowrule = float, ^(pavucontrol)$
windowrule = center, ^(pavucontrol)$
windowrule = size 800 500, ^(pavucontrol)$

# Ubisoft
windowrulev2 = noborder, class:^(upc.exe)$
windowrulev2 = noshadow, class:^(upc.exe)$
windowrulev2 = rounding 0, class:^(upc.exe)$

# Disable auto focus
windowrulev2 = noinitialfocus, class:.*

# Keybindings
# https://wiki.hyprland.org/Configuring/Binds
# https://wiki.hyprland.org/Configuring/Keywords
$mainMod = SUPER

# Sleep (broken)
#bind = $mainMod, L, exec, sleep 1 && hyprctl dispatch dpms off

# Todo
#bind = $mainMod, R, exec, wofi --show drun

# Apps
# https://gist.github.com/pojntfx/a06c7a7d45787258701dde4975d067e6
bind = $mainMod, B, exec, thorium-browser --enable-features=UseOzonePlatform --ozone-platform=wayland
bind = $mainMod, D, exec, thunar
bind = $mainMod, E, exec, codium
bind = $mainMod, I, exec, firefox
bind = $mainMod, S, exec, spotifywm
bind = $mainMod, T, exec, foot
bind = $mainMod, Print, exec, wayshot

# Hyprland
bind = $mainMod, C, killactive,
bind = $mainMod CTRL, C, forcerendererreload,
bind = $mainMod, M, exit,
bind = $mainMod, P, pseudo, # dwindle
bind = $mainMod, V, togglefloating,

# Exclusive fullscreen with mainMod + P
bind = $mainMod, F, fullscreen, 0

# Windowed fullscreen with mainMod + SHIFT + P
bind = $mainMod SHIFT, F, fullscreen, 1

# Fake fullscreen with mainMod + CTRL + F
bind = $mainMod CTRL, F, fakefullscreen

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Move window with mainMod + SHIFT + arrow keys
bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, right, movewindow, r
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, down, movewindow, d

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Move active window silently to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod CTRL, 1, movetoworkspacesilent, 1
bind = $mainMod CTRL, 2, movetoworkspacesilent, 2
bind = $mainMod CTRL, 3, movetoworkspacesilent, 3
bind = $mainMod CTRL, 4, movetoworkspacesilent, 4
bind = $mainMod CTRL, 5, movetoworkspacesilent, 5
bind = $mainMod CTRL, 6, movetoworkspacesilent, 6
bind = $mainMod CTRL, 7, movetoworkspacesilent, 7
bind = $mainMod CTRL, 8, movetoworkspacesilent, 8
bind = $mainMod CTRL, 9, movetoworkspacesilent, 9
bind = $mainMod CTRL, 0, movetoworkspacesilent, 10

# Move active window through existing workspaces with mainMod + SHIFT + scroll
bind = $mainMod SHIFT, mouse_down, movetoworkspace, e+1
bind = $mainMod SHIFT, mouse_up, movetoworkspace, e-1

# Move active window silently through existing workspaces with mainMod + CTRL + scroll
bind = $mainMod CTRL, mouse_down, movetoworkspacesilent, e+1
bind = $mainMod CTRL, mouse_up, movetoworkspacesilent, e-1

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Game mode
bind = WIN, F1, exec, ~/docs/repos/system/script/hyprland-gamemode.sh
